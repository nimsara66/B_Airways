<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking</title>

    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <!-- font awesome cdn link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- custom css file link  -->
    <link rel="stylesheet" href="/stylesheets/book.css">

</head>

<body>

    <%- include('../component/header.ejs',{user}); %>




    <section class="book" id="book">

        <h1 class="heading">
            <span>b</span>
            <span>o</span>
            <span>o</span>
            <span>k</span>
            <span class="space"></span>
            <span>n</span>
            <span>o</span>
            <span>w</span>
        </h1>

        <% if(!user){ %> 

        <div class="row">

            <div class="left-right" >
                <div class="title">

                    <h1>Book tickets as a guest</h1>
                    <h3>(If you want to get discount and other benifits please create a customer account)</h3>
                </div>
                

                <form action="/register" id="guest-form" method="post">
                    <div class="inputBox">
                        <input type="text" class="box" name="first_name" placeholder="First Name">
                    </div>
                    <div class="inputBox">
                        <input type="text" class="box" name="last_name" placeholder="Last Name">
                    </div>
                    <div class="inputBox">
                        <input type="text" class="box" name="gender" placeholder="Gender">
                    </div>

                    <div class="inputBox">
                        <input type="text" class="box" name="contact_number" placeholder="Contact Number">
                    </div>

                    <div class="inputBox">
                        <input type="text" class="box" name="passport_number" placeholder="Passport Number">
                    </div>

                    <div class="inputBox">
                        <input type="text" class="box" name="address_line1" placeholder="Address Line 1">
                    </div>

                    <div class="inputBox">
                        <input type="text" class="box" name="address_line2" placeholder="Address Line 2">
                    </div>

                    <div class="inputBox">
                        <input type="text" class="box" name="birthday" placeholder="Birthday">
                    </div>

                    <div class="inputBox">
                        <input type="text" class="box" name="email" placeholder="Email">        
                    </div>
                    <input type="text" name="schedule_id" class="form-control book-input" value="<%=flightScheduleData.schedule_id%>" readonly hidden>
                    <button type="submit" class="btn" >Submit</button>
                </form>
            </div>

        </div>
        <% } %> 

        <div class="row">


            <div class="left-right">

                <form action="" id="book-form" method="post">
                    <div class="title">

                        <h3>ticket deatails</h3>
                        
                    </div>

                    <div class="inputBox">
                        <h3>Origin</h3>
                        <input type="text" placeholder="place name" readonly value="<%=flightScheduleData.origin%>">
                    </div>
                    <div class="inputBox">
                        <h3>Destination</h3>
                        <input type="text" placeholder="place name" readonly value="<%=flightScheduleData.destination%>">
                    </div>
                    <div class="inputBox">
                        <h3>how many booked by yu</h3>
                        <input type="text" id="num-booked-seats" name="num_seats" class="book-input" value="0" readonly >
                    </div>
                    <div class="inputBox">
                        <h3>arrivals</h3>
                        <input type="text" value="<%=flightScheduleData.arrival_date%>" readonly >
                    </div>
                    <div class="inputBox">
                        <h3>leaving</h3>
                        <input type="text" value="<%=flightScheduleData.departure_date%>" readonly >
                    </div>
                    <div class="inputBox">
                        <h3>Base Price</h3>
                        <input type="text" id="base-price" readonly >
                    </div>
                    <div class="inputBox">
                        <h3>Discount</h3>
                        <input type="text" name="discount" value="<%=priceData && priceData.discount ? priceData.discount:0%>%" readonly>
                    </div>
                    <div class="inputBox">
                        <h3>Total Price</h3>
                        <input type="text" id="final-price"  readonly >
                    </div>
                    <div hidden>
                        <input type="text" name="schedule_id" class="form-control book-input" value="<%=flightScheduleData.schedule_id%>" readonly>
                        <input type="text" name="aircraft_id" class="form-control book-input" value="<%=flightScheduleData.aircraft_id%>" readonly>
                        <input type="text" id="selected-seats" name="selected_seats" class="form-control book-input" value="[]" readonly >
                    </div>
                <div class="row">
                    <div class="">
                        <button type="submit" class="btn" id="book-now-btn">Book Now</button>
                    </div>
                </form>
                    <div class="">
                        <%if(user && user.user_type==='guest_customer'){%>
                            <form action="/auth/logout">
                                <button type="submit" class="btn"  style="background-color: rgb(247, 16, 16); margin-left: 50%;" id="exit-btn">Guest LogOut</button>
                            </form>
                        <%}%>
                    </div>
                </div>
                     
                


                <input type="text" hidden id="unavailable-seats" value="<%=JSON.stringify(seatBookingData.unavailableSeats)%>">
                <input type="text" hidden id="occupied-seats" value="<%=JSON.stringify(seatBookingData.occupiedSeats)%>">
                <input type="text" hidden id="already-booked-seats" value="<%=JSON.stringify(seatBookingData.bookedSeatsByThisCustomer)%>">
                <input type="text" hidden id="platinum-price" value="<%=priceData.prices.platinum%>">
                <input type="text" hidden id="business-price" value="<%=priceData.prices.business%>">
                <input type="text" hidden id="economy-price" value="<%=priceData.prices.economy%>">
                <input type="text" hidden id="after-discount-platinum-price" value="<%=priceData.afterDiscount.platinum%>">
                <input type="text" hidden id="after-discount-business-price" value="<%=priceData.afterDiscount.business%>">
                <input type="text" hidden id="after-discount-economy-price" value="<%=priceData.afterDiscount.economy%>">
               
            </div>


            <div class="left-col">
                <!-- <img src="images/book-img.svg" alt=""> -->
                <!-- <h1>This part contains available sheets details and passport deatails</h1> -->
                <div class="title">

                    <h3>select sheet(s) and class</h3>
                    
                </div>
                <%- include('\sample_seats.ejs',{msg}); %>
            </div>




        </div>

    </section>
    <script src="/javascripts/book/sample_seats.js"></script>
</body>

</html>